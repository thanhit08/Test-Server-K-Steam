# Use Ubuntu 18.04 as the base image
FROM nvidia/cuda:12.2.2-cudnn8-runtime-ubuntu20.04

# Create a virtual environment and activate it

# Install necessary packages for TensorFlow
RUN apt-get update && \
    apt-get install -y python3 python3-pip python3-dev && \
    pip3 install --upgrade pip && \
    apt-get install -y libsm6 libxext6 libxrender-dev 
RUN apt install python3.8-venv
RUN python3 -m venv venv
RUN . venv/bin/activate

RUN pip3 install tensorflow-gpu==2.6.0

# Set the working directory
WORKDIR /app

# Copy the requirements.txt file to the working directory
COPY requirements.txt .


# Install the required packages
RUN pip3 install -r requirements.txt
RUN pip3 install python-multipart
RUN pip3 install tensorflow_similarity

